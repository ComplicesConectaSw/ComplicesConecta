
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for android/app/src/main/assets/public/assets/AdminProduction-bBupOTLF.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../../../../../../prettify.css" />
    <link rel="stylesheet" href="../../../../../../../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../../../../../../../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../../../../../../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../../../../../../../index.html">All files</a> / <a href="index.html">android/app/src/main/assets/public/assets</a> AdminProduction-bBupOTLF.js</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>0/5</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>0/1</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>0/1</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>0/5</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line low'></div>
    <pre><table class="coverage">
<tr><td class="line-count quiet"><a name='L1'></a><a href='#L1'>1</a>
<a name='L2'></a><a href='#L2'>2</a>
<a name='L3'></a><a href='#L3'>3</a>
<a name='L4'></a><a href='#L4'>4</a>
<a name='L5'></a><a href='#L5'>5</a>
<a name='L6'></a><a href='#L6'>6</a></td><td class="line-coverage quiet"><span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js"><span class="cstat-no" title="statement not covered" >import{y as X,u as K,r as o,an as J,am as i,j as e,n as D,B as f,A as Y,C as d,a as m,b as h,U as E,d as x,s as I,al as Z,p as ee,t as se,v as te,w as b,ai as ae,x as v,k as N,I as ie}from"./index-74aJIhuM.js";import{T as re}from"./textarea-DfPzdF5a.js";import{u as ne,C as le,a as ce,T as oe}from"./useAuth-BwE_kEfE.js";import{M as de}from"./message-square-D5Nm0N8T.js";import{P as me}from"./plus-OZ01SG42.js";const ye=()=&gt;{const{isAuthenticated:k,user:y}=ne(),{toast:n}=X(),u=K(),[p,_]=o.useState([]),[c,A]=o.useState({totalUsers:0,activeUsers:0,premiumUsers:0,totalMatches:0,apkDownloads:0,dailyVisits:0,totalTokens:0,stakedTokens:0,worldIdVerified:0,rewardsDistributed:0}),[S,w]=o.useState([]),[P,C]=o.useState([]),[T,q]=o.useState(!0),[he,xe]=o.useState(null),[l,g]=o.useState({question:"",answer:"",category:"general"}),[ue,pe]=o.useState(null);o.useEffect(()=&gt;{if(!k()){n({title:"Acceso Denegado",description:"Debe iniciar sesión para acceder al panel de administración",variant:"destructive"}),u("/auth");return}if(!y?.email||!J(y.email)){n({title:"Acceso Denegado",description:"No tiene permisos de administrador de producción",variant:"destructive"}),u("/discover");return}U()},[u,n,k,y]);const U=async()=&gt;{q(!0);try{await Promise.all([F(),R(),V(),O()])}catch(s){console.error("Error loading production admin data:",s),n({title:"Error",description:"Error al cargar datos del panel de administración de producción",variant:"destructive"})}finally{q(!1)}},F=async()=&gt;{try{const{data:s,error:a}=await i.from("profiles").select("*").order("created_at",{ascending:!1}).limit(100);if(a){console.error("Error loading profiles:",a);return}const r=(s||[]).map(t=&gt;({id:t.id,display_name:`${t.first_name} ${t.last_name}`,first_name:t.first_name,last_name:t.last_name,age:t.age,location:t.bio||"No especificada",email:"No disponible",is_verified:t.is_verified||!1,gender:t.gender,interested_in:t.interested_in,is_premium:t.is_premium||!1,created_at:t.created_at,last_seen:"Nunca",avatar_url:"",bio:t.bio||"Sin biografía",relationship_type:"single"}));_(r)}catch(s){console.error("Error in loadRealProfiles:",s)}},R=async()=&gt;{try{const[{count:s},{count:a},{count:r},{count:t},z,we,$]=await Promise.all([i.from("profiles").select("*",{count:"exact",head:!0}),i.from("profiles").select("*",{count:"exact",head:!0}).eq("is_premium",!0),i.from("profiles").select("*",{count:"exact",head:!0}).eq("is_verified",!0),i.from("profiles").select("*",{count:"exact",head:!0}).eq("relationship_type","couple"),i.from("app_metrics").select("*"),i.from("user_token_balances").select("cmpx_balance"),i.from("apk_downloads").select("*",{count:"exact",head:!0})]),j=H=&gt;z.data?.find(W=&gt;W.metric_name===H)?.metric_value||0,G=0,B=j("staked_tokens");A({totalUsers:s||0,activeUsers:Math.floor((s||0)*.7),premiumUsers:a||0,totalMatches:j("total_matches"),apkDownloads:$.count||0,dailyVisits:j("daily_visits"),totalTokens:G,stakedTokens:B,worldIdVerified:r||0,rewardsDistributed:j("rewards_distributed")})}catch(s){console.error("Error loading real stats:",s)}},V=async()=&gt;{try{const{data:s,error:a}=await i.from("faq_items").select("*").eq("is_active",!0).order("display_order",{ascending:!0});if(a){console.error("Error loading FAQ:",a);const t=[{id:"1",question:"¿Cómo funciona ComplicesConecta?",answer:"ComplicesConecta es una plataforma que conecta personas con intereses similares en el lifestyle swinger.",category:"general",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"2",question:"¿Es segura la plataforma?",answer:"Sí, utilizamos verificación WorldID y medidas de seguridad avanzadas.",category:"seguridad",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}];w(t);return}const r=(s||[]).map(t=&gt;({id:t.id,question:t.question,answer:t.answer,category:t.category||"general",created_at:t.created_at,updated_at:t.updated_at}));w(r)}catch(s){console.error("Error in loadRealFAQ:",s);const a=[{id:"1",question:"¿Cómo funciona ComplicesConecta?",answer:"ComplicesConecta es una plataforma que conecta personas con intereses similares en el lifestyle swinger.",category:"general",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}];w(a)}},O=async()=&gt;{try{const{data:s,error:a}=await i.from("invitations").select(`<span class="fstat-no" title="function not covered" ><span class="branch-0 cbranch-no" title="branch not covered" ></span></span></span>
<span class="cstat-no" title="statement not covered" >          *,</span>
<span class="cstat-no" title="statement not covered" >          from_profile:profiles!invitations_from_profile_fkey(display_name, avatar_url),</span>
<span class="cstat-no" title="statement not covered" >          to_profile:profiles!invitations_to_profile_fkey(display_name, avatar_url)</span>
<span class="cstat-no" title="statement not covered" >        `).order("created_at",{ascending:!1}).limit(50);if(a){console.error("Error loading invitations:",a);const t=[{id:"1",from_profile:"admin-profile",to_profile:"user-profile-1",message:"Invitación de administrador",type:"profile",status:"pending",created_at:new Date().toISOString()}];C(t);return}const r=(s||[]).map(t=&gt;({id:t.id,from_profile:t.from_profile,to_profile:t.to_profile,message:t.message||"Sin mensaje",type:t.type||"profile",status:t.status||"pending",created_at:t.created_at||new Date().toISOString()}));C(r)}catch(s){console.error("Error loading invitations:",s)}},Q=async s=&gt;{try{const{error:a}=await i.from("profiles").delete().eq("id",s);if(a)throw a;_(p.filter(r=&gt;r.id!==s)),n({title:"Perfil Eliminado",description:"El perfil ha sido eliminado exitosamente"})}catch{n({title:"Error",description:"Error al eliminar el perfil",variant:"destructive"})}},L=async s=&gt;{try{const a=p.find(t=&gt;t.id===s);if(!a)return;const{error:r}=await i.from("profiles").update({is_premium:!a.is_premium}).eq("id",s);if(r)throw r;_(p.map(t=&gt;t.id===s?{...t,is_premium:!t.is_premium}:t)),n({title:"Estado Premium Actualizado",description:`El usuario ${a.is_premium?"ya no es":"ahora es"} premium`})}catch{n({title:"Error",description:"Error al actualizar el estado premium",variant:"destructive"})}},M=async()=&gt;{if(!l.question||!l.answer){n({title:"Error",description:"Debe completar la pregunta y respuesta",variant:"destructive"});return}try{const{data:s,error:a}=await i.from("faq_items").insert([{question:l.question,answer:l.answer,category:l.category}]).select().single();if(a)throw a;w([...S,{id:s.id,question:s.question,answer:s.answer,category:s.category||"general",created_at:s.created_at||new Date().toISOString(),updated_at:s.updated_at||new Date().toISOString()}]),g({question:"",answer:"",category:"general"}),n({title:"FAQ Agregada",description:"La pregunta frecuente ha sido agregada exitosamente"})}catch(s){console.error("Error adding FAQ:",s),n({title:"Error",description:"Error al agregar la pregunta frecuente",variant:"destructive"})}};return T?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900",children:[e.jsx(D,{}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-white text-xl",children:"Cargando panel de administración..."})})})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900",children:[e.jsx(D,{}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsxs(f,{variant:"outline",onClick:()=&gt;u("/discover"),className:"text-white border-white/20 hover:bg-white/10",children:[e.jsx(Y,{className:"w-4 h-4 mr-2"}),"Volver"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Panel de Administración - Producción"}),e.jsx("p",{className:"text-white/70",children:"Gestión completa de la plataforma ComplicesConecta"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs(d,{className:"bg-white/10 backdrop-blur-md border-white/20",children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium text-white",children:"Usuarios Totales"}),e.jsx(E,{className:"h-4 w-4 text-white"})]}),e.jsxs(x,{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:c.totalUsers}),e.jsx("p",{className:"text-xs text-white/70",children:"Usuarios registrados"})]})]}),e.jsxs(d,{className:"bg-white/10 backdrop-blur-md border-white/20",children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium text-white",children:"Usuarios Premium"}),e.jsx(I,{className:"h-4 w-4 text-white"})]}),e.jsxs(x,{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:c.premiumUsers}),e.jsx("p",{className:"text-xs text-white/70",children:"Con suscripción activa"})]})]}),e.jsxs(d,{className:"bg-white/10 backdrop-blur-md border-white/20",children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium text-white",children:"Descargas APK"}),e.jsx(Z,{className:"h-4 w-4 text-white"})]}),e.jsxs(x,{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:c.apkDownloads}),e.jsx("p",{className:"text-xs text-white/70",children:"Descargas totales"})]})]}),e.jsxs(d,{className:"bg-white/10 backdrop-blur-md border-white/20",children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium text-white",children:"Verificados WorldID"}),e.jsx(ee,{className:"h-4 w-4 text-white"})]}),e.jsxs(x,{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:c.worldIdVerified}),e.jsx("p",{className:"text-xs text-white/70",children:"Usuarios verificados"})]})]})]}),e.jsxs(se,{defaultValue:"users",className:"space-y-6",children:[e.jsxs(te,{className:"bg-white/10 backdrop-blur-md border-white/20",children:[e.jsxs(b,{value:"users",className:"text-white data-[state=active]:bg-white/20",children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"Usuarios"]}),e.jsxs(b,{value:"stats",className:"text-white data-[state=active]:bg-white/20",children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Estadísticas"]}),e.jsxs(b,{value:"faq",className:"text-white data-[state=active]:bg-white/20",children:[e.jsx(ae,{className:"w-4 h-4 mr-2"}),"FAQ"]}),e.jsxs(b,{value:"invitations",className:"text-white data-[state=active]:bg-white/20",children:[e.jsx(de,{className:"w-4 h-4 mr-2"}),"Invitaciones"]})]}),e.jsx(v,{value:"users",className:"space-y-6",children:e.jsxs(d,{className:"bg-white/10 backdrop-blur-md border-white/20",children:[e.jsx(m,{children:e.jsx(h,{className:"text-white",children:"Gestión de Usuarios"})}),e.jsx(x,{children:e.jsx("div",{className:"space-y-4",children:p.slice(0,10).map(s=&gt;e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-semibold",children:s.display_name?.charAt(0)||s.first_name?.charAt(0)||"U"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:s.display_name||`${s.first_name} ${s.last_name}`||"Usuario sin nombre"}),e.jsx("p",{className:"text-white/60 text-sm",children:s.email}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[s.is_premium&amp;&amp;e.jsx(N,{variant:"secondary",children:"Premium"}),s.is_verified&amp;&amp;e.jsx(N,{variant:"outline",children:"Verificado"})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{size:"sm",variant:"outline",onClick:()=&gt;L(s.id),className:"text-white border-white/20 hover:bg-white/10",children:s.is_premium?e.jsx(ce,{className:"w-4 h-4"}):e.jsx(I,{className:"w-4 h-4"})}),e.jsx(f,{size:"sm",variant:"destructive",onClick:()=&gt;Q(s.id),children:e.jsx(oe,{className:"w-4 h-4"})})]})]},s.id))})})]})}),e.jsx(v,{value:"faq",className:"space-y-6",children:e.jsxs(d,{className:"bg-white/10 backdrop-blur-md border-white/20",children:[e.jsx(m,{children:e.jsx(h,{className:"text-white",children:"Gestión de FAQ"})}),e.jsxs(x,{children:[e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ie,{placeholder:"Pregunta",value:l.question,onChange:s=&gt;g({...l,question:s.target.value}),className:"bg-white/10 border-white/20 text-white placeholder-white/50"}),e.jsxs("select",{value:l.category,onChange:s=&gt;g({...l,category:s.target.value}),className:"bg-white/10 border border-white/20 text-white rounded-md px-3 py-2",children:[e.jsx("option",{value:"general",children:"General"}),e.jsx("option",{value:"seguridad",children:"Seguridad"}),e.jsx("option",{value:"tokens",children:"Tokens"}),e.jsx("option",{value:"premium",children:"Premium"})]})]}),e.jsx(re,{placeholder:"Respuesta",value:l.answer,onChange:s=&gt;g({...l,answer:s.target.value}),className:"bg-white/10 border-white/20 text-white placeholder-white/50",rows:3}),e.jsxs(f,{onClick:M,className:"bg-purple-600 hover:bg-purple-700",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Agregar FAQ"]})]}),e.jsx("div",{className:"space-y-4",children:S.map(s=&gt;e.jsx("div",{className:"p-4 bg-white/5 rounded-lg",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-white font-medium mb-2",children:s.question}),e.jsx("p",{className:"text-white/70 text-sm mb-2",children:s.answer}),e.jsx(N,{variant:"outline",className:"text-xs",children:s.category||"general"})]})})},s.id))})]})]})}),e.jsx(v,{value:"stats",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs(d,{className:"bg-white/10 backdrop-blur-md border-white/20",children:[e.jsx(m,{children:e.jsx(h,{className:"text-white",children:"Tokens CMPX"})}),e.jsx(x,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/70",children:"Total en circulación:"}),e.jsx("span",{className:"text-white font-semibold",children:c.totalTokens.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/70",children:"En staking:"}),e.jsx("span",{className:"text-white font-semibold",children:c.stakedTokens.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/70",children:"Recompensas distribuidas:"}),e.jsx("span",{className:"text-white font-semibold",children:c.rewardsDistributed.toLocaleString()})]})]})})]}),e.jsxs(d,{className:"bg-white/10 backdrop-blur-md border-white/20",children:[e.jsx(m,{children:e.jsx(h,{className:"text-white",children:"Actividad"})}),e.jsx(x,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/70",children:"Visitas diarias:"}),e.jsx("span",{className:"text-white font-semibold",children:c.dailyVisits})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/70",children:"Usuarios activos:"}),e.jsx("span",{className:"text-white font-semibold",children:c.activeUsers})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-white/70",children:"Total matches:"}),e.jsx("span",{className:"text-white font-semibold",children:c.totalMatches})]})]})})]})]})}),e.jsx(v,{value:"invitations",className:"space-y-6",children:e.jsxs(d,{className:"bg-white/10 backdrop-blur-md border-white/20",children:[e.jsx(m,{children:e.jsx(h,{className:"text-white",children:"Invitaciones Recientes"})}),e.jsx(x,{children:e.jsx("div",{className:"space-y-4",children:P.slice(0,10).map(s=&gt;e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-white font-medium",children:["Invitación ",s.type]}),e.jsx("p",{className:"text-white/60 text-sm",children:s.message}),e.jsx("p",{className:"text-white/40 text-xs",children:new Date(s.created_at).toLocaleDateString()})]}),e.jsx(N,{variant:s.status==="accepted"?"default":s.status==="pending"?"secondary":"destructive",children:s.status})]},s.id))})})]})})]})]})]})};export{ye as default};</span>
&nbsp;</pre></td></tr></table></pre>

                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2025-09-06T14:13:53.841Z
            </div>
        <script src="../../../../../../../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../../../../../../../sorter.js"></script>
        <script src="../../../../../../../block-navigation.js"></script>
    </body>
</html>
    