<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="manifest" href="/manifest.json" />
    <meta name="theme-color" content="#000000" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="ComplicesConecta" />
    <title>ComplicesConectaSW - Conecta Social Comunidad</title>
    <meta name="description" content="ComplicesConectaSW - Plataforma de conexión social" />
    <meta name="author" content="ComplicesConectaSW" />

    <meta property="og:title" content="ComplicesConectaSW - Conecta Social Comunidad" />
    <meta property="og:description" content="ComplicesConectaSW - Plataforma de conexión social" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="/placeholder.svg" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@ComplicesConectaSW" />
    <meta name="twitter:image" content="/placeholder.svg" />
    <!-- Protección de wallets ULTRA TEMPRANA - debe estar en <head> para ejecutarse antes de las extensiones -->
    <script>
      (function() {
        'use strict';
        // Protección ULTRA TEMPRANA - ANTES de que se carguen las extensiones de wallet
        // Este script debe ejecutarse lo más temprano posible, incluso antes de que el DOM esté listo
        
        // Guardar referencias originales INMEDIATAMENTE
        const originalDefineProperty = Object.defineProperty;
        const originalConsoleError = console.error;
        const originalConsoleWarn = console.warn;
        const originalConsoleLog = console.log;
        
        // Silenciar console.error para wallets ANTES de que se carguen las extensiones
        console.error = function(...args) {
          try {
            const msg = args.join(' ').toLowerCase();
            if (msg.includes('wallet') || msg.includes('ethereum') || msg.includes('solana') || 
                msg.includes('metamask') || msg.includes('tronweb') || msg.includes('tronlink') ||
                msg.includes('bybit') || msg.includes('evmask') || msg.includes('cannot redefine') ||
                msg.includes('cannot assign to read only') || msg.includes('read only property') ||
                msg.includes('which has only a getter') || msg.includes('inpage.js') ||
                msg.includes('evmAsk.js') || msg.includes('data-layer') || msg.includes('solana.js') ||
                msg.includes('dist.94abdbf1.js') || msg.includes('chainid') || msg.includes('chain id')) {
              return;
            }
            originalConsoleError.apply(console, args);
          } catch {
            // Silenciar errores en el filtro mismo
          }
        };
        
        // Silenciar console.warn para wallets
        console.warn = function(...args) {
          try {
            const msg = args.join(' ').toLowerCase();
            if (msg.includes('wallet') || msg.includes('ethereum') || msg.includes('solana') ||
                msg.includes('metamask') || msg.includes('tronweb') || msg.includes('tronlink') ||
                msg.includes('bybit') || msg.includes('evmask') || msg.includes('overwrite')) {
              return;
            }
            originalConsoleWarn.apply(console, args);
          } catch {
            // Silenciar errores en el filtro mismo
          }
        };
        
        // Interceptar Object.defineProperty para propiedades de wallet - ULTRA AGRESIVO
        Object.defineProperty = function(obj, prop, descriptor) {
          try {
            const walletProps = ['ethereum', 'solana', 'tronweb', 'tronWeb', 'bybitWallet', 'bybit', 'chainId', 'chainid'];
            const propLower = String(prop).toLowerCase();
            
            // Si es una propiedad de wallet en window, manejar cuidadosamente
            if (obj === window && walletProps.some(wp => propLower === wp.toLowerCase())) {
              try {
                const existing = Object.getOwnPropertyDescriptor(window, prop);
                
                // Si ya existe y no es configurable, simplemente retornar sin error
                if (existing && !existing.configurable) {
                  return obj;
                }
                
                // Intentar definir normalmente
                try {
                  return originalDefineProperty.call(this, obj, prop, descriptor);
                } catch (err) {
                  // Si falla, simplemente retornar sin error
                  return obj;
                }
              } catch {
                // Cualquier error, simplemente retornar sin error
                return obj;
              }
            }
            
            // Para otros casos, intentar definir normalmente
            try {
              return originalDefineProperty.call(this, obj, prop, descriptor);
            } catch (error) {
              const errMsg = String(error?.message || '').toLowerCase();
              const isWalletError = walletProps.some(wp => propLower === wp.toLowerCase()) && 
                                    obj === window &&
                                    (errMsg.includes('cannot redefine') || 
                                     errMsg.includes('read only') ||
                                     errMsg.includes('which has only a getter'));
              
              if (isWalletError) {
                return obj;
              }
              throw error;
            }
          } catch {
            // En caso de cualquier error, intentar retornar el objeto
            return obj;
          }
        };
        
        // Interceptar errores globales - ULTRA AGRESIVO
        window.addEventListener('error', function(e) {
          try {
            const msg = String(e.message || '').toLowerCase();
            const filename = String(e.filename || '').toLowerCase();
            const stack = String(e.error?.stack || '').toLowerCase();
            
            if (msg.includes('cannot redefine property') || msg.includes('cannot assign to read only') ||
                msg.includes('read only property') || msg.includes('which has only a getter') ||
                msg.includes('wallet') || msg.includes('ethereum') || msg.includes('solana') ||
                msg.includes('metamask') || msg.includes('tronweb') || msg.includes('tronlink') ||
                msg.includes('bybit') || msg.includes('evmask') ||
                filename.includes('inpage.js') || filename.includes('evmAsk.js') ||
                filename.includes('solana.js') || filename.includes('data-layer') ||
                filename.includes('dist.94abdbf1.js') ||
                stack.includes('inpage.js') || stack.includes('evmAsk.js') ||
                stack.includes('solana.js') || stack.includes('data-layer')) {
              e.stopImmediatePropagation();
              e.preventDefault();
              return false;
            }
          } catch {
            // Silenciar errores en el handler
          }
        }, true);
        
        // Interceptar promise rejections - ULTRA AGRESIVO
        window.addEventListener('unhandledrejection', function(e) {
          try {
            const reason = e.reason;
            const msg = String(reason?.message || reason?.toString() || '').toLowerCase();
            const stack = String(reason?.stack || '').toLowerCase();
            const code = String(reason?.code || '').toLowerCase();
            
            if (msg.includes('cannot redefine property') || msg.includes('cannot assign to read only') ||
                msg.includes('read only property') || msg.includes('which has only a getter') ||
                msg.includes('wallet must') || msg.includes('wallet') ||
                msg.includes('ethereum') || msg.includes('solana') || msg.includes('metamask') ||
                msg.includes('tronweb') || msg.includes('tronlink') || msg.includes('bybit') ||
                msg.includes('evmask') || msg.includes('chainid') ||
                msg.includes('inpage.js') || msg.includes('evmAsk.js') || msg.includes('data-layer') ||
                msg.includes('solana.js') || msg.includes('dist.94abdbf1.js') ||
                stack.includes('inpage.js') || stack.includes('evmAsk.js') ||
                stack.includes('data-layer') || stack.includes('solana.js') ||
                code === '4001' || (reason && typeof reason === 'object' && 'code' in reason && reason.code === 4001)) {
              e.stopImmediatePropagation();
              e.preventDefault();
              return false;
            }
          } catch {
            // Silenciar errores en el handler
          }
        }, true);
      })();
    </script>
  </head>

  <body>
    <div id="root">
      <!-- Loading fallback - se reemplaza cuando React carga -->
      <div style="min-height: 100vh; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #6b21a8 0%, #3b82f6 100%);">
        <div style="color: white; text-align: center;">
          <div style="width: 40px; height: 40px; border: 4px solid rgba(255,255,255,0.3); border-top: 4px solid white; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 1rem;"></div>
          <p>Cargando...</p>
        </div>
      </div>
    </div>
    <!-- Protección de wallets ANTES de que se carguen las extensiones -->
    <script>
      (function() {
        'use strict';
        // Protección ULTRA TEMPRANA - ANTES de que se carguen las extensiones de wallet
        const originalDefineProperty = Object.defineProperty;
        const originalConsoleError = console.error;
        const originalConsoleWarn = console.warn;
        
        // Silenciar console.error para wallets
        console.error = function(...args) {
          const msg = args.join(' ').toLowerCase();
          if (msg.includes('wallet') || msg.includes('ethereum') || msg.includes('solana') || 
              msg.includes('metamask') || msg.includes('tronweb') || msg.includes('tronlink') ||
              msg.includes('bybit') || msg.includes('evmask') || msg.includes('cannot redefine') ||
              msg.includes('cannot assign to read only') || msg.includes('read only property') ||
              msg.includes('which has only a getter') || msg.includes('inpage.js') ||
              msg.includes('evmAsk.js') || msg.includes('data-layer') || msg.includes('solana.js')) {
            return;
          }
          originalConsoleError.apply(console, args);
        };
        
        // Silenciar console.warn para wallets
        console.warn = function(...args) {
          const msg = args.join(' ').toLowerCase();
          if (msg.includes('wallet') || msg.includes('ethereum') || msg.includes('solana') ||
              msg.includes('metamask') || msg.includes('tronweb') || msg.includes('tronlink') ||
              msg.includes('bybit') || msg.includes('evmask')) {
            return;
          }
          originalConsoleWarn.apply(console, args);
        };
        
        // Interceptar Object.defineProperty para propiedades de wallet
        Object.defineProperty = function(obj, prop, descriptor) {
          const walletProps = ['ethereum', 'solana', 'tronWeb', 'bybitWallet', 'tronweb', 'chainId', 'chainid'];
          
          if (obj === window && walletProps.includes(prop.toLowerCase())) {
            try {
              const existing = Object.getOwnPropertyDescriptor(window, prop);
              if (existing && !existing.configurable) {
                // Propiedad no configurable, solo retornar sin error
                return obj;
              }
              return originalDefineProperty.call(this, obj, prop, descriptor);
            } catch {
              // Cualquier error, solo retornar sin error
              return obj;
            }
          }
          
          try {
            return originalDefineProperty.call(this, obj, prop, descriptor);
          } catch (error) {
            const errMsg = (error?.message || '').toLowerCase();
            if (walletProps.includes(prop.toLowerCase()) && obj === window &&
                (errMsg.includes('cannot redefine') || errMsg.includes('read only'))) {
              return obj;
            }
            throw error;
          }
        };
        
        // Interceptar errores globales
        window.addEventListener('error', function(e) {
          const msg = (e.message || '').toLowerCase();
          const filename = (e.filename || '').toLowerCase();
          
          if (msg.includes('cannot redefine property') || msg.includes('cannot assign to read only') ||
              msg.includes('read only property') || msg.includes('which has only a getter') ||
              msg.includes('wallet') || msg.includes('ethereum') || msg.includes('solana') ||
              filename.includes('inpage.js') || filename.includes('evmAsk.js') ||
              filename.includes('solana.js') || filename.includes('data-layer')) {
            e.stopImmediatePropagation();
            e.preventDefault();
            return false;
          }
        }, true);
        
        // Interceptar promise rejections
        window.addEventListener('unhandledrejection', function(e) {
          const reason = e.reason;
          const msg = (reason?.message || reason?.toString() || '').toLowerCase();
          const code = reason?.code?.toString() || '';
          
          if (msg.includes('cannot redefine property') || msg.includes('cannot assign to read only') ||
              msg.includes('read only property') || msg.includes('which has only a getter') ||
              msg.includes('wallet must') || msg.includes('wallet') ||
              msg.includes('ethereum') || msg.includes('solana') || msg.includes('metamask') ||
              msg.includes('tronweb') || msg.includes('tronlink') || msg.includes('bybit') ||
              msg.includes('inpage.js') || msg.includes('evmAsk.js') || msg.includes('data-layer') ||
              code === '4001' || (reason && typeof reason === 'object' && 'code' in reason && reason.code === 4001)) {
            e.stopImmediatePropagation();
            e.preventDefault();
            return false;
          }
        }, true);
      })();
    </script>
    <script type="module" src="/src/main.tsx"></script>
    <style>
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
    </style>
  </body>
</html>
