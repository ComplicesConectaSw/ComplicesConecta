import{u as L,r as l,ao as y,au as S,j as e,B as p,A as T,az as M,C as d,d as c,I as h,l as U,aw as $}from"./index-1rAgi2Qg.js";import{T as q}from"./textarea-D_hiNBb5.js";import{g as C}from"./data-B29IFJau.js";import{N as D}from"./Navigation-DRkFH7zH.js";import{S as O}from"./save-CwpqgYWE.js";import"./useFeatures-BfaxJA2a.js";import"./user-plus-wrE-Be86.js";const Q=()=>{const f=L(),[k,b]=l.useState(null),[a,o]=l.useState({name:"",age:"",location:"",profession:"",bio:"",interests:[],avatar:""}),[I,g]=l.useState(!1),[z,m]=l.useState(""),[B,w]=l.useState(""),[F,u]=l.useState(""),[j,x]=l.useState(!1),E=["Lifestyle Swinger","Intercambio de Parejas","Encuentros Casuales","Comunicación Abierta","Respeto Mutuo","Experiencias Nuevas","Discreción Total","Fiestas Privadas","Clubs Exclusivos","Conexiones Reales","Aventuras","Diversión","Hoteles Temáticos","Eventos VIP","Masajes Sensuales","Fotografía Sensual"],N=l.useCallback(async()=>{if(!j)try{const s=localStorage.getItem("demo_authenticated"),i=localStorage.getItem("demo_user");if(s==="true"&&i){const r=JSON.parse(i);let t;(r.accountType==="single"||r.type==="single")&&(t=C(r.id),o({name:t.first_name+" "+t.last_name,age:t.age.toString(),bio:t.bio,location:t.location,profession:t.profession||"",interests:t.interests||[],avatar:t.avatar||""}),u(r.id),b(t),x(!0))}else if(y().features.demoCredentials){const{data:{user:r}}=await S.auth.getUser();if(r){const{data:t,error:v}=await S.from("profiles").select("*").eq("id",r.id).single();v?(console.error("Error fetching profile:",v),m("Error al cargar perfil")):t&&(o({name:`${t.first_name||""} ${t.last_name||""}`.trim(),age:t.age?.toString()||"",bio:t.bio||"",location:`${t.latitude||""}, ${t.longitude||""}`,profession:"",interests:[],avatar:""}),u(r.id),b(t),x(!0))}else{const t=C();o({name:`${t.first_name} ${t.last_name}`,age:t.age.toString(),bio:t.bio,location:t.location,profession:t.profession,interests:t.interests,avatar:t.avatar}),t.id&&(u(t.id),b(t),x(!0))}}}catch(s){m("Error inesperado al cargar perfil"),console.error("Error loading profile:",s)}},[j]);l.useEffect(()=>{N()},[N]);const n=(s,i)=>{o(r=>({...r,[s]:i}))},_=s=>{o(i=>({...i,interests:i.interests.includes(s)?i.interests.filter(r=>r!==s):[...i.interests,s]}))},P=async()=>{if(!I){g(!0),m(""),w("");try{if(y().features.demoCredentials){const i={...JSON.parse(localStorage.getItem("demo_user")||"{}"),...a,age:parseInt(a.age)||void 0};localStorage.setItem("demo_user",JSON.stringify(i)),w("Perfil guardado exitosamente (modo demo)")}}catch{m("Error inesperado al guardar perfil")}finally{g(!1)}}},A=()=>{localStorage.removeItem("demo_authenticated"),localStorage.removeItem("demo_user"),f("/auth")};return k?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-pink-900 to-red-900 relative overflow-hidden px-2 sm:px-4",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute top-20 left-10 w-72 h-72 bg-pink-500/20 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob"}),e.jsx("div",{className:"absolute top-40 right-10 w-72 h-72 bg-purple-500/20 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-2000"}),e.jsx("div",{className:"absolute -bottom-8 left-20 w-72 h-72 bg-red-500/20 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-4000"})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"bg-white/10 backdrop-blur-md border-b border-white/20 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(p,{variant:"ghost",onClick:()=>f(-1),className:"text-white hover:bg-white/20",children:e.jsx(T,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-lg font-semibold text-white",children:"Editar Perfil"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(p,{variant:"outline",onClick:A,className:"text-red-600 border-red-200 hover:bg-red-50",children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Cerrar Sesión"]}),e.jsxs(p,{onClick:P,className:"bg-gradient-to-r from-pink-500 to-purple-500 text-white",children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"Guardar"]})]})]})}),e.jsxs("div",{className:"p-4 pb-24 space-y-6",children:[e.jsx(d,{className:"bg-white/10 backdrop-blur-md border-white/20 shadow-glow",children:e.jsxs(c,{className:"p-6 space-y-4",children:[e.jsx("h3",{className:"font-semibold text-white mb-4",children:"Información básica"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Nombre completo"}),e.jsx(h,{value:a.name,onChange:s=>n("name",s.target.value),placeholder:"Tu nombre completo",className:"bg-white/20 border-white/30 text-white placeholder:text-white/70"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Edad"}),e.jsx(h,{type:"number",value:a.age,onChange:s=>n("age",s.target.value),placeholder:"Tu edad",className:"bg-white/20 border-white/30 text-white placeholder:text-white/70"})]})]})}),e.jsx(d,{className:"bg-white/10 backdrop-blur-md border-white/20 shadow-glow",children:e.jsxs(c,{className:"p-6 space-y-4",children:[e.jsx("h3",{className:"font-semibold text-white mb-4",children:"Información adicional"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Ubicación"}),e.jsx(h,{value:a.location,onChange:s=>n("location",s.target.value),placeholder:"Ciudad donde vives",className:"bg-white/20 border-white/30 text-white placeholder:text-white/70"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Profesión"}),e.jsx(h,{value:a.profession,onChange:s=>n("profession",s.target.value),placeholder:"A qué te dedicas",className:"bg-white/20 border-white/30 text-white placeholder:text-white/70"})]})]})}),e.jsx(d,{className:"bg-white/10 backdrop-blur-md border-white/20 shadow-glow",children:e.jsxs(c,{className:"p-6",children:[e.jsx("h3",{className:"font-semibold text-white mb-4",children:"Sobre ti"}),e.jsx(q,{value:a.bio,onChange:s=>n("bio",s.target.value),placeholder:"Cuéntanos sobre ti, qué buscas en el lifestyle swinger...",rows:4,className:"resize-none bg-white/20 border-white/30 text-white placeholder:text-white/70"}),e.jsxs("p",{className:"text-xs text-white/70 mt-2",children:[a.bio.length,"/500 caracteres"]})]})}),e.jsx(d,{className:"bg-white/10 backdrop-blur-md border-white/20 shadow-glow",children:e.jsxs(c,{className:"p-6",children:[e.jsx("h3",{className:"font-semibold text-white mb-4",children:"Intereses"}),e.jsx("p",{className:"text-sm text-white/70 mb-4",children:"Selecciona hasta 6 intereses que te representen en el lifestyle"}),e.jsx("div",{className:"flex flex-wrap gap-2 max-h-48 overflow-y-auto p-4 border border-white/30 rounded-lg bg-white/10 backdrop-blur-sm",children:E.map(s=>e.jsxs(U,{variant:a.interests.includes(s)?"default":"secondary",className:`cursor-pointer transition-all ${a.interests.includes(s)?"bg-gradient-to-r from-pink-500 to-purple-500 text-white shadow-md border-0":"bg-white/20 text-white border border-white/30 hover:bg-white/30"}`,onClick:()=>_(s),children:[s,a.interests.includes(s)&&e.jsx($,{className:"h-3 w-3 ml-1"})]},s))}),e.jsxs("p",{className:"text-xs text-white/70 mt-2",children:[a.interests.length,"/6 seleccionados"]})]})}),e.jsx(d,{className:"bg-white/10 backdrop-blur-md border-white/20 shadow-glow",children:e.jsxs(c,{className:"p-6",children:[e.jsx("h3",{className:"font-semibold text-white mb-4",children:"Configuración de privacidad"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-white",children:"Mostrar edad"}),e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded bg-white/20 border-white/30",title:"Mostrar edad en perfil"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-white",children:"Mostrar ubicación"}),e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded bg-white/20 border-white/30",title:"Mostrar ubicación en perfil"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-white",children:"Aparecer en búsquedas"}),e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded bg-white/20 border-white/30",title:"Aparecer en resultados de búsqueda"})]})]})]})})]})]}),e.jsx(D,{}),e.jsx("style",{children:`
        @keyframes blob {
          0%, 100% { transform: translate(0px, 0px) scale(1); }
          33% { transform: translate(30px, -50px) scale(1.1); }
          66% { transform: translate(-20px, 20px) scale(0.9); }
        }
        
        .animate-blob {
          animation: blob 7s infinite;
        }
        
        .animation-delay-2000 {
          animation-delay: 2s;
        }
        
        .animation-delay-4000 {
          animation-delay: 4s;
        }
      `})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-pink-100 via-purple-50 to-indigo-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),e.jsx("p",{className:"text-white",children:"Cargando..."})]})})};export{Q as default};
